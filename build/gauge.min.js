function gauge(e){function t(e,t,s,a){var i=(a-90)*Math.PI/180;return{x:e+s*Math.cos(i),y:t+s*Math.sin(i)}}function s(e,s,a,i,l){var n=t(e,s,a,l),r=t(e,s,a,i),o=180>=l-i?"0":"1",d=["M",n.x,n.y,"A",a,a,0,o,0,r.x,r.y].join(" ");return d}function i(e,t){var s=[-20,e,e,e-t/2,e,e+t/2].join(",");return s}function l(e,t){for(var s in t)e.setAttribute(s,t[s])}this.values={tags:[0,1,2,3,4,5,6],radius:160,divisionSep:3,arrowWidth:8,inside:!0,degrees:!0};for(a in e)this.values[a]=e[a];var n=document.createElement("div"),r=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","polygon"),d=document.createElement("div"),g=document.createElement("span"),h=document.createElementNS("http://www.w3.org/2000/svg","svg"),u=document.createElementNS("http://www.w3.org/2000/svg","circle"),p=document.createElementNS("http://www.w3.org/2000/svg","path"),c=document.createElementNS("http://www.w3.org/2000/svg","path"),v=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class","gauge__wrap"),l(r,{x:"0",y:"0","class":"gauge__arrow"}),o.setAttribute("class","gauge__polygon"),d.setAttribute("class","division"),g.setAttribute("class","dot"),l(h,{"class":"gauge",x:"0px",y:"0px"}),l(u,{"class":"gauge__center",r:"7"}),l(p,{"class":"gauge__grey","stroke-width":"3"}),l(v,{"class":"gauge__yellow","stroke-width":"3"}),l(c,{"class":"gauge__red","stroke-width":"3"}),n.appendChild(r),n.appendChild(d),n.appendChild(h),r.appendChild(o),d.appendChild(g),h.appendChild(u),h.appendChild(p),h.appendChild(v),h.appendChild(c),this.values.block?document.getElementById(this.values.block).appendChild(n):document.body.appendChild(n),1==this.values.degrees&&(this.values.tags=[-30,0,30,60,90,120,150,180,210],this.values.divisionSep=9);var w=this.values.radius,m=this.values.tags.length,y=(m-1)*this.values.divisionSep+m;angle=210,step=4*Math.PI/3/y,k=0,d.style.width=2*w+40+"px",d.style.height=2*w+40+"px",h.style.width=2*w+40+"px",h.style.height=2*w+40+"px",r.style.width=2*w+"px",r.style.height=2*w+"px",u.setAttribute("cx",w),u.setAttribute("cy",w),p.setAttribute("d",s(w,w,w-10,-120,120)),v.setAttribute("d",s(w,w,w-10,60,90)),c.setAttribute("d",s(w,w,w-10,90,120)),o.setAttribute("points",i(w,this.values.arrowWidth));var f=d.clientHeight,A=d.clientWidth,x=[];this.values.inside=1==this.values.inside?20:0;for(var b=0;y>b;b++){var C=g.cloneNode(!0),_=!1;if(b%(this.values.divisionSep+1)===0){C.className+=" special-dot";var E=document.createElement("span");E.className="value";var N=document.createTextNode(this.values.tags[k]);E.appendChild(N),k+=1,C.appendChild(E),_=!0}d.appendChild(C);var S=A/2+(w-this.values.inside)*Math.cos(angle),M=f/2+(w-this.values.inside)*Math.sin(angle);1==_&&(rotateAngle=57.3*Math.atan(Math.abs(w+20-M)/Math.abs(w+20-S)),w+20>S?rotateAngle=w+20>M?180+rotateAngle:180-rotateAngle:w+20>M&&(rotateAngle=-rotateAngle),x.push(rotateAngle),C.style.transform="rotate("+rotateAngle+"deg)",E.style.transform="rotate("+-rotateAngle+"deg)",E.style.top=-E.offsetHeight/2+"px"),C.style.left=S+"px",C.style.top=M-C.offsetHeight/2+"px",angle+=step}this.setValue=function(e,t){var s=-1!=this.values.tags.indexOf(t);if("string"==e)if(1==s){var a=this.values.tags.indexOf(t);r.style.transform="rotate("+(180+x[a])+"deg)"}else t>=0&&360>=t&&(t=Number(t),r.style.transform="rotate("+t+"deg)");else"deg"==e?r.style.transform="rotate("+t+"deg)":console.log("Value error")}}